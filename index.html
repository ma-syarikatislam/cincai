<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Progres Hafalan Juz 30</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
      background: #f9f9f9;
    }

    h1 {
      font-size: 1.5rem;
      display: flex;
      align-items: center;
    }

    ul, ol {
      padding-left: 1.2rem;
    }

    li {
      padding: 4px 8px;
      border-radius: 5px;
      margin: 2px 0;
    }

    .done-j {
      background-color: #c8e6c9;
    }

    .done-m {
      position: relative;
      color: #fff8e1;
      font-weight: bold;
      overflow: hidden;
      background: linear-gradient(135deg, #ffd700, #ffeb3b, #ffd700);
      background-size: 200% 200%;
      animation: shimmer 2.5s infinite linear;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    .shimmer-leaderboard {
      font-weight: bold;
      background: linear-gradient(90deg, #fff2b3, #ffe066, #fff2b3);
      background-size: 200% auto;
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
      animation: shimmer 3s linear infinite;
    }

    .toggle-button {
      margin-top: 1rem;
      padding: 6px 12px;
      font-size: 0.9rem;
      background: #607d8b;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .toggle-content {
      display: none;
      margin-top: 1rem;
    }

    h2 {
      margin-top: 2rem;
      font-size: 1.2rem;
    }
  </style>
</head>
<body>
  <h1>ðŸ“– Leaderboard Hafalan</h1>
  <ol id="leaderboardList"></ol>

  <button class="toggle-button" onclick="toggleDetail()">ðŸ“Š Tampilkan Ringkasan</button>
  <div id="detailSection" class="toggle-content">
    <h2>ðŸ“Š Diagram Pie</h2>
    <div id="pieChart">(belum ditambahkan)</div>

    <h2>ðŸš« Siswa yang Belum Setor Sama Sekali</h2>
    <ul id="belumSetorList"></ul>
  </div>

  <h2>ðŸ“š Daftar Surat & Status</h2>
  <div id="dataContainer"></div>

  <script>
    const surat = [
      "An-Naba", "An-Nazi'at", "Abasa", "At-Takwir", "Al-Infithar", "Al-Muthaffifin", "Al-Insyiqaq", "Al-Buruj", "Ath-Thariq", "Al-A'la",
      "Al-Ghasyiyah", "Al-Fajr", "Al-Balad", "Asy-Syams", "Al-Lail", "Ad-Duha", "Al-Insyirah", "At-Tin", "Al-'Alaq", "Al-Qadr",
      "Al-Bayyinah", "Az-Zalzalah", "Al-'Adiyat", "Al-Qari'ah", "At-Takatsur", "Al-Ashr", "Al-Humazah", "Al-Fil", "Quraisy", "Al-Ma'un",
      "Al-Kautsar", "Al-Kafirun", "An-Nashr", "Al-Lahab", "Al-Ikhlas", "Al-Falaq", "An-Nas"
    ];

    const data = [
      { nama: "Ali", nilai: { "An-Naba": "M", "An-Nazi'at": "J", "Abasa": "M", "An-Nas": "M" } },
      { nama: "Dini", nilai: {} },
      {
        nama: "Fatimah",
        nilai: Object.fromEntries(surat.map(s => [s, "M"]))
      },
      {
        nama: "Zaki",
        nilai: Object.fromEntries(surat.map((s, i) => [s, i % 2 === 0 ? "J" : "M"]))
      }
    ];

    const dataContainer = document.getElementById("dataContainer");
    const leaderboardList = document.getElementById("leaderboardList");
    const belumSetorList = document.getElementById("belumSetorList");

    data.forEach(siswa => {
      const totalSetoran = surat.filter(s => siswa.nilai[s] === "M" || siswa.nilai[s] === "J").length;

      if (totalSetoran === 0) {
        const li = document.createElement("li");
        li.textContent = siswa.nama;
        belumSetorList.appendChild(li);
        return;
      }

      const ul = document.createElement("ul");
      const namaHeader = document.createElement("h3");
      namaHeader.textContent = siswa.nama;
      ul.appendChild(namaHeader);

      surat.forEach(s => {
        const nilai = siswa.nilai[s];
        const li = document.createElement("li");
        li.textContent = s;

        if (nilai === "J") li.classList.add("done-j");
        if (nilai === "M") li.classList.add("done-m");

        ul.appendChild(li);
      });

      dataContainer.appendChild(ul);
    });

    const leaderboard = data
      .map(siswa => {
        const total = surat.filter(s => siswa.nilai[s] === "M" || siswa.nilai[s] === "J").length;
        const khatam = total === surat.length;
        return { nama: siswa.nama, total, khatam };
      })
      .filter(d => d.total > 0)
      .sort((a, b) => b.total - a.total);

    leaderboard.forEach(s => {
      const li = document.createElement("li");
      li.innerHTML = `${s.nama} - ${s.total} surat${s.khatam ? ' ðŸ¥‡' : ''}`;
      if (s.khatam) li.classList.add("shimmer-leaderboard");
      leaderboardList.appendChild(li);
    });

    function toggleDetail() {
      const section = document.getElementById("detailSection");
      section.style.display = section.style.display === "none" || !section.style.display ? "block" : "none";
    }
  </script>
</body>
</html>
